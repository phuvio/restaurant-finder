{% extends "layout.html" %}
{% block content %}

    <div class="google-map">
        {% if mymap %}
            {{ mymap.html }}
        {% endif %}
    </div>
    
    <h2>Hae ravintolaa hakusanalla</h2>

    <form action="/restaurants" method="post">
        Haettava teksti: 
        <br>
        <input type="text" name="search_string" minlength="1" maxlength="20">
        <p>
        <input type="submit" name="action" value="Hae">
    </form>

    <h2>Hae ravintolaa ryhmästä</h2>

    <form action="/restaurants" method="post">
        <select name="select_group" method="post">
            <option value="">-- Valitse ryhmä --</option>
            {% for group in dropdown %}
                <option value="{{ group.id }}">{{ group.name }}</option>
            {% endfor %}
        </select>
        <input type="submit" name="action" value="Hae ryhmää">
    </form>

    {% if found_restaurants %}
        <h2>Löydetyt ravintolat</h2>
        {% for found in found_restaurants %}
            {% if found.avg_stars %}
                <p>{{ found.avg_stars }} <a href="/restaurant/{{ found.id }}">{{ found.name }}</a></p>
            {% else %}
                <p><a href="/restaurant/{{ found.id }}">{{ found.name }}</a></p>
            {% endif %}
        {% endfor %}
    {% endif %}

    {% if error %}
        <p>{{ error }}</p>
    {% endif %}

{% endblock %}